<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.63" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://yinheng.me/code/2018-07-05-Objective-c%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B.html"><meta property="og:site_name" content="Best Intention"><meta property="og:title" content="Objective-C å¯¹è±¡æ¨¡å‹"><meta property="og:description" content="ä» Objective-C å¯¹è±¡æ¨¡å‹æ¥äº†è§£ä¸€ä¸‹åœ¨ iOS é‡Œé¢ï¼Œç±»æ˜¯å¦‚ä½•è¢«åˆ›å»ºä»¥åŠå±æ€§ã€æ–¹æ³•ã€æˆå‘˜å˜é‡ç­‰å†…å­˜æ˜¯å¦‚ä½•åˆ†é…ï¼Œæ¥äº†è§£è¿è¡Œæ—¶çš„éƒ¨åˆ†å†…å®¹ã€‚ å¯¹è±¡ åœ¨ Objective-C ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯æŸä¸ªç±»çš„å®ä¾‹ï¼Œåœ¨è‹¹æœå¼€æºçš„ Runtime æ–‡ä»¶ä¸­æˆ‘ä»¬å‘ç°è¿™æ ·çš„å®šä¹‰ typedef struct objc_object *id;"><meta property="og:type" content="website"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-06-26T06:20:32.000Z"><meta property="article:author" content="Maple Yin"><meta property="article:tag" content="iOS"><meta property="article:tag" content="Runtime"><meta property="article:published_time" content="2018-07-05T00:00:00.000Z"><meta property="article:modified_time" content="2023-06-26T06:20:32.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"Objective-C å¯¹è±¡æ¨¡å‹","description":"ä» Objective-C å¯¹è±¡æ¨¡å‹æ¥äº†è§£ä¸€ä¸‹åœ¨ iOS é‡Œé¢ï¼Œç±»æ˜¯å¦‚ä½•è¢«åˆ›å»ºä»¥åŠå±æ€§ã€æ–¹æ³•ã€æˆå‘˜å˜é‡ç­‰å†…å­˜æ˜¯å¦‚ä½•åˆ†é…ï¼Œæ¥äº†è§£è¿è¡Œæ—¶çš„éƒ¨åˆ†å†…å®¹ã€‚ å¯¹è±¡ åœ¨ Objective-C ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯æŸä¸ªç±»çš„å®ä¾‹ï¼Œåœ¨è‹¹æœå¼€æºçš„ Runtime æ–‡ä»¶ä¸­æˆ‘ä»¬å‘ç°è¿™æ ·çš„å®šä¹‰ typedef struct objc_object *id;"}</script><title>Objective-C å¯¹è±¡æ¨¡å‹ | Best Intention</title><meta name="description" content="ä» Objective-C å¯¹è±¡æ¨¡å‹æ¥äº†è§£ä¸€ä¸‹åœ¨ iOS é‡Œé¢ï¼Œç±»æ˜¯å¦‚ä½•è¢«åˆ›å»ºä»¥åŠå±æ€§ã€æ–¹æ³•ã€æˆå‘˜å˜é‡ç­‰å†…å­˜æ˜¯å¦‚ä½•åˆ†é…ï¼Œæ¥äº†è§£è¿è¡Œæ—¶çš„éƒ¨åˆ†å†…å®¹ã€‚ å¯¹è±¡ åœ¨ Objective-C ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯æŸä¸ªç±»çš„å®ä¾‹ï¼Œåœ¨è‹¹æœå¼€æºçš„ Runtime æ–‡ä»¶ä¸­æˆ‘ä»¬å‘ç°è¿™æ ·çš„å®šä¹‰ typedef struct objc_object *id;">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-31e5c259.css" as="style"><link rel="stylesheet" href="/assets/style-31e5c259.css">
    <link rel="modulepreload" href="/assets/app-559df010.js"><link rel="modulepreload" href="/assets/2018-07-05-Objective-cå¯¹è±¡æ¨¡å‹.html-9050da2f.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/2018-07-05-Objective-cå¯¹è±¡æ¨¡å‹.html-4aa75616.js"><link rel="prefetch" href="/assets/index.html-a4bd2ba0.js" as="script"><link rel="prefetch" href="/assets/index.html-d397f0d2.js" as="script"><link rel="prefetch" href="/assets/skill.html-abccc45f.js" as="script"><link rel="prefetch" href="/assets/timeline.html-ceefba82.js" as="script"><link rel="prefetch" href="/assets/tools.html-1a3aa2cd.js" as="script"><link rel="prefetch" href="/assets/2016-11-09-how-to-define-denomination.html-f40f753c.js" as="script"><link rel="prefetch" href="/assets/2016-11-20-image-min-repeat.html-bba3e023.js" as="script"><link rel="prefetch" href="/assets/2017-04-28-candy.html-6cbaa61c.js" as="script"><link rel="prefetch" href="/assets/2018-07-27-tree.html-61378c76.js" as="script"><link rel="prefetch" href="/assets/2018-08-20-area.html-b9f16f9e.js" as="script"><link rel="prefetch" href="/assets/2018-09-12-Best-Time-to-Buy-and-Sell-Stock-II-cn.html-1937ac6e.js" as="script"><link rel="prefetch" href="/assets/2018-09-12-Remove-Duplicates-from-Sorted-Array-cn.html-92804829.js" as="script"><link rel="prefetch" href="/assets/2018-09-13-Contains-Duplicate.html-fa2e1c71.js" as="script"><link rel="prefetch" href="/assets/2018-09-13-Rotate-Array-cn.html-df7c2168.js" as="script"><link rel="prefetch" href="/assets/2019-06-11-Two-City-Scheduling.html-c5e95388.js" as="script"><link rel="prefetch" href="/assets/2020-04-08-Remove-Duplicates-from-Sorted-Array.html-291d3f4f.js" as="script"><link rel="prefetch" href="/assets/2020-04-09-Best-Time-to-Buy-and-Sell-Stock-II.html-e655dc82.js" as="script"><link rel="prefetch" href="/assets/2020-04-09-Rotate-Array.html-3a17bbdc.js" as="script"><link rel="prefetch" href="/assets/2020-04-21-Move-Zeroes.html-1246a1e8.js" as="script"><link rel="prefetch" href="/assets/404.html-3f47964d.js" as="script"><link rel="prefetch" href="/assets/index.html-1a654624.js" as="script"><link rel="prefetch" href="/assets/index.html-5341bac8.js" as="script"><link rel="prefetch" href="/assets/index.html-7576217e.js" as="script"><link rel="prefetch" href="/assets/index.html-809e7209.js" as="script"><link rel="prefetch" href="/assets/index.html-0230915b.js" as="script"><link rel="prefetch" href="/assets/index.html-1ddddc17.js" as="script"><link rel="prefetch" href="/assets/index.html-d3cc35f7.js" as="script"><link rel="prefetch" href="/assets/index.html-b3a187d2.js" as="script"><link rel="prefetch" href="/assets/skill.html-e583413d.js" as="script"><link rel="prefetch" href="/assets/timeline.html-5085692d.js" as="script"><link rel="prefetch" href="/assets/tools.html-1cdddbff.js" as="script"><link rel="prefetch" href="/assets/2016-11-09-how-to-define-denomination.html-91e55cca.js" as="script"><link rel="prefetch" href="/assets/2016-11-20-image-min-repeat.html-0141e754.js" as="script"><link rel="prefetch" href="/assets/2017-04-28-candy.html-0b3b3731.js" as="script"><link rel="prefetch" href="/assets/2018-07-27-tree.html-028d9699.js" as="script"><link rel="prefetch" href="/assets/2018-08-20-area.html-af12d3f2.js" as="script"><link rel="prefetch" href="/assets/2018-09-12-Best-Time-to-Buy-and-Sell-Stock-II-cn.html-3dba6d6b.js" as="script"><link rel="prefetch" href="/assets/2018-09-12-Remove-Duplicates-from-Sorted-Array-cn.html-1308bfd2.js" as="script"><link rel="prefetch" href="/assets/2018-09-13-Contains-Duplicate.html-3185241b.js" as="script"><link rel="prefetch" href="/assets/2018-09-13-Rotate-Array-cn.html-9c6928db.js" as="script"><link rel="prefetch" href="/assets/2019-06-11-Two-City-Scheduling.html-6120436b.js" as="script"><link rel="prefetch" href="/assets/2020-04-08-Remove-Duplicates-from-Sorted-Array.html-1690a458.js" as="script"><link rel="prefetch" href="/assets/2020-04-09-Best-Time-to-Buy-and-Sell-Stock-II.html-ea13b6cb.js" as="script"><link rel="prefetch" href="/assets/2020-04-09-Rotate-Array.html-5d25f980.js" as="script"><link rel="prefetch" href="/assets/2020-04-21-Move-Zeroes.html-0400abbb.js" as="script"><link rel="prefetch" href="/assets/404.html-cce6e097.js" as="script"><link rel="prefetch" href="/assets/index.html-33c5a7c4.js" as="script"><link rel="prefetch" href="/assets/index.html-56b55376.js" as="script"><link rel="prefetch" href="/assets/index.html-ab1e6625.js" as="script"><link rel="prefetch" href="/assets/index.html-d9f639dc.js" as="script"><link rel="prefetch" href="/assets/index.html-c4286730.js" as="script"><link rel="prefetch" href="/assets/index.html-16979e52.js" as="script"><link rel="prefetch" href="/assets/waline-meta-a31b78ed.js" as="script"><link rel="prefetch" href="/assets/component-e4541a1c.js" as="script"><link rel="prefetch" href="/assets/auto-fa8841cf.js" as="script"><link rel="prefetch" href="/assets/index-ae8c1e74.js" as="script"><link rel="prefetch" href="/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-33051730.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-e8c5bdeb.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-2450701e.js" as="script"><link rel="prefetch" href="/assets/pageview-0ff86680.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container no-sidebar has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/avatar.jpg" alt="Best Intention"><!----><span class="vp-site-name hide-in-pad">Best Intention</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/"><!---->Home<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link active" href="/code.html"><!---->Code<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Objective-C å¯¹è±¡æ¨¡å‹</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://yinheng.me" target="_blank" rel="noopener noreferrer">Maple Yin</a></span><span property="author" content="Maple Yin"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2018-07-05T00:00:00.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="waline-pageview-count" data-path="/code/2018-07-05-Objective-c%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 7 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT7M"></span><!----><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag1" role>iOS</span><span class="page-tag-item tag0" role>Runtime</span><!--]--><meta property="keywords" content="iOS,Runtime"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#isa">isa</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#isa-åˆå§‹åŒ–">isa åˆå§‹åŒ–</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#indexed-å’Œ-magic">indexed å’Œ magic</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#has-cxx-dtor">has_cxx_dtor</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#shiftcls">shiftcls</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#è·å–åŸå§‹-isa-åœ°å€">è·å–åŸå§‹ isa åœ°å€</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#cache">cache</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#bits">bits</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><p>ä» Objective-C å¯¹è±¡æ¨¡å‹æ¥äº†è§£ä¸€ä¸‹åœ¨ iOS é‡Œé¢ï¼Œç±»æ˜¯å¦‚ä½•è¢«åˆ›å»ºä»¥åŠå±æ€§ã€æ–¹æ³•ã€æˆå‘˜å˜é‡ç­‰å†…å­˜æ˜¯å¦‚ä½•åˆ†é…ï¼Œæ¥äº†è§£è¿è¡Œæ—¶çš„éƒ¨åˆ†å†…å®¹ã€‚</p><h1 id="å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡" aria-hidden="true">#</a> å¯¹è±¡</h1><p>åœ¨ Objective-C ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯æŸä¸ªç±»çš„å®ä¾‹ï¼Œåœ¨è‹¹æœå¼€æºçš„ Runtime æ–‡ä»¶ä¸­æˆ‘ä»¬å‘ç°è¿™æ ·çš„å®šä¹‰</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">objc_object</span> <span class="token operator">*</span>id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å…³äº <code>objc_object</code> çš„å®šä¹‰ï¼š</p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="language-c++"><code>struct objc_object {
private:
    isa_t isa;

public:
....
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œå°±çœ‹å‡ºï¼Œä¸ºä»€ä¹ˆ <code>id</code> ç±»å‹å¯ä»¥ä»£è¡¨æ‰€æœ‰çš„å¯¹è±¡ã€‚</p><h1 id="ç±»" tabindex="-1"><a class="header-anchor" href="#ç±»" aria-hidden="true">#</a> ç±»</h1><p>æè¿°äº†å¯¹è±¡çš„å±æ€§ã€æ–¹æ³•ã€æˆå‘˜å˜é‡ã€å†…å­˜å¤§å°ç­‰ã€‚æˆ‘ä»¬å…·ä½“æ¥çœ‹çœ‹ç±»çš„ç»“æ„</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">objc_class</span> <span class="token operator">*</span>Class<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å…³äº <code>objc_class</code> çš„å®šä¹‰ï¼š</p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="language-c++"><code>struct objc_class : objc_object {
    // Class ISA;
    Class superclass;
    cache_t cache;             // formerly cache pointer and vtable
    class_data_bits_t bits;    // class_rw_t * plus custom rr/alloc flags
    ...
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="isa" tabindex="-1"><a class="header-anchor" href="#isa" aria-hidden="true">#</a> isa</h2><p>é€šå¸¸çš„ï¼Œæˆ‘ä»¬ç»å¸¸ç®€å•çš„ç†è§£ <code>isa</code> æ˜¯å¯¹è±¡æŒ‡å‘è‡ªå·±ç±»çš„ä¸€ä¸ªæŒ‡é’ˆï¼Œæ¯ä¸ªç±»åˆæŒ‡å‘è‡ªå·±å¯¹åº”çš„å…ƒç±»ã€‚è¿™é‡Œæ¶‰åŠä¸€äº›æ–¹æ³•è°ƒç”¨ç›¸å…³çŸ¥è¯†ï¼Œè¿™é‡Œå…ˆä¸èµ˜è¿°ã€‚ä¸‹é¢çš„å›¾å¤§è‡´æè¿°äº†ç±»ä¹‹é—´ <code>isa</code> æŒ‡é’ˆçš„å…³ç³»ã€‚</p><figure><img src="https://image-1257141638.cos.ap-guangzhou.myqcloud.com/post/class-meta-relative.jpg" alt="relation of class" tabindex="0" loading="lazy"><figcaption>relation of class</figcaption></figure><p><code>isa</code> æœ¬è´¨ä¸Šæ˜¯ç»“æ„ä½“ <code>isa_t</code> å®šä¹‰å¦‚ä¸‹ï¼šï¼ˆé’ˆå¯¹ <code>__x86_64__</code> æ¶æ„ä¸‹çš„å®šä¹‰ï¼‰</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">union</span> <span class="token class-name">isa_t</span> 
<span class="token punctuation">{</span>
    <span class="token class-name">isa_t</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token class-name">isa_t</span><span class="token punctuation">(</span><span class="token class-name">uintptr_t</span> value<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">bits</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    Class cls<span class="token punctuation">;</span>
    <span class="token class-name">uintptr_t</span> bits<span class="token punctuation">;</span>
    
<span class="token macro property"><span class="token directive-hash">#</span>   <span class="token directive keyword">define</span> <span class="token macro-name">ISA_MASK</span>        <span class="token expression"><span class="token number">0x00007ffffffffff8ULL</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span>   <span class="token directive keyword">define</span> <span class="token macro-name">ISA_MAGIC_MASK</span>  <span class="token expression"><span class="token number">0x001f800000000001ULL</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span>   <span class="token directive keyword">define</span> <span class="token macro-name">ISA_MAGIC_VALUE</span> <span class="token expression"><span class="token number">0x001d800000000001ULL</span></span></span>
    <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        <span class="token class-name">uintptr_t</span> indexed           <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token class-name">uintptr_t</span> has_assoc         <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// å¯¹è±¡å«æœ‰æˆ–è€…æ›¾ç»å«æœ‰å…³è”å¼•ç”¨ï¼Œæ²¡æœ‰å…³è”å¼•ç”¨çš„å¯ä»¥æ›´å¿«åœ°é‡Šæ”¾å†…å­˜</span>
        <span class="token class-name">uintptr_t</span> has_cxx_dtor      <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// è¡¨ç¤ºè¯¥å¯¹è±¡æ˜¯å¦æœ‰ C++ æˆ–è€… Objc çš„ææ„å™¨</span>
        <span class="token class-name">uintptr_t</span> shiftcls          <span class="token operator">:</span> <span class="token number">44</span><span class="token punctuation">;</span> <span class="token comment">// MACH_VM_MAX_ADDRESS 0x7fffffe00000  ç±»çš„æŒ‡é’ˆ</span>
        <span class="token class-name">uintptr_t</span> magic             <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">;</span>  <span class="token comment">// åˆ¤æ–­å¯¹è±¡æ˜¯å¦åˆå§‹åŒ–å®Œæˆï¼Œåœ¨arm64ä¸­0x16æ˜¯è°ƒè¯•å™¨åˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯çœŸçš„å¯¹è±¡è¿˜æ˜¯æ²¡æœ‰åˆå§‹åŒ–çš„ç©ºé—´ã€‚</span>
        <span class="token class-name">uintptr_t</span> weakly_referenced <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// å¯¹è±¡è¢«æŒ‡å‘æˆ–è€…æ›¾ç»æŒ‡å‘ä¸€ä¸ª ARC çš„å¼±å˜é‡ï¼Œæ²¡æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡å¯ä»¥æ›´å¿«é‡Šæ”¾</span>
        <span class="token class-name">uintptr_t</span> deallocating      <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// å¯¹è±¡æ˜¯å¦æ­£åœ¨é‡Šæ”¾å†…å­˜</span>
        <span class="token class-name">uintptr_t</span> has_sidetable_rc  <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// åˆ¤æ–­è¯¥å¯¹è±¡çš„å¼•ç”¨è®¡æ•°æ˜¯å¦è¿‡å¤§ï¼Œå¦‚æœè¿‡å¤§åˆ™éœ€è¦å…¶ä»–æ•£åˆ—è¡¨æ¥è¿›è¡Œå­˜å‚¨ã€‚</span>
        <span class="token class-name">uintptr_t</span> extra_rc          <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">;</span>  <span class="token comment">// å­˜æ”¾è¯¥å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å€¼å‡ä¸€åçš„ç»“æœã€‚å¯¹è±¡çš„å¼•ç”¨è®¡æ•°è¶…è¿‡ 1ï¼Œä¼šå­˜åœ¨è¿™ä¸ªè¿™ä¸ªé‡Œé¢ï¼Œå¦‚æœå¼•ç”¨è®¡æ•°ä¸º 10ï¼Œextra_rcçš„å€¼å°±ä¸º 9ã€‚</span>
<span class="token macro property"><span class="token directive-hash">#</span>       <span class="token directive keyword">define</span> <span class="token macro-name">RC_ONE</span>   <span class="token expression"><span class="token punctuation">(</span><span class="token number">1ULL</span><span class="token operator">&lt;&lt;</span><span class="token number">56</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span>       <span class="token directive keyword">define</span> <span class="token macro-name">RC_HALF</span>  <span class="token expression"><span class="token punctuation">(</span><span class="token number">1ULL</span><span class="token operator">&lt;&lt;</span><span class="token number">7</span><span class="token punctuation">)</span></span></span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ° <code>isa_t</code> æ˜¯ä¸€ä¸ª <code>union</code> æ„å‘³ç€ <code>isa_t</code>ã€ <code>cls</code>ã€<code>bits</code> ä»¥åŠä¸‹é¢çš„ç»“æ„ä½“å…±ç”¨ä¸€å—åœ°å€ç©ºé—´ï¼Œæ€»ç©ºé—´å¤§å°ä¼šå æ® 64 ä½åœ°å€ç©ºé—´ã€‚ï¼ˆç»“æ„ä½“æ‰€å ç”¨ç©ºé—´æœ€å¤§ï¼‰</p><figure><img src="https://image-1257141638.cos.ap-guangzhou.myqcloud.com/post/isa_t_s.png" alt="relation of class" tabindex="0" loading="lazy"><figcaption>relation of class</figcaption></figure><h2 id="isa-åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#isa-åˆå§‹åŒ–" aria-hidden="true">#</a> <code>isa</code> åˆå§‹åŒ–</h2><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="language-c++"><code>// initIsa() should be used to init the isa of new objects only.
// If this object already has an isa, use changeIsa() for correctness.
// initInstanceIsa(): objects with no custom RR/AWZ
// initClassIsa(): class objects
// initProtocolIsa(): protocol objects
// initIsa(): other objects
void initIsa(Class cls /*indexed=false*/);
void initClassIsa(Class cls /*indexed=maybe*/);
void initProtocolIsa(Class cls /*indexed=maybe*/);
void initInstanceIsa(Class cls, bool hasCxxDtor);


inline void 
objc_object::initIsa(Class cls, bool indexed, bool hasCxxDtor) 
{ 
    assert(!isTaggedPointer()); 
    
    if (!indexed) {
        isa.cls = cls;
    } else {
        assert(!DisableIndexedIsa);
        isa.bits = ISA_MAGIC_VALUE;
        // isa.magic is part of ISA_MAGIC_VALUE
        // isa.indexed is part of ISA_MAGIC_VALUE
        isa.has_cxx_dtor = hasCxxDtor;
        isa.shiftcls = (uintptr_t)cls &gt;&gt; 3;
    }
}

inline void 
objc_object::initClassIsa(Class cls)
{
    if (DisableIndexedIsa) {
        initIsa(cls, false, false);
    } else {
        initIsa(cls, true, false);
    }
}

inline void
objc_object::initProtocolIsa(Class cls)
{
    return initClassIsa(cls);
}

inline void 
objc_object::initInstanceIsa(Class cls, bool hasCxxDtor)
{
    assert(!UseGC);
    assert(!cls-&gt;requiresRawIsa());
    assert(hasCxxDtor == cls-&gt;hasCxxDtor());

    initIsa(cls, true, hasCxxDtor);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="indexed-å’Œ-magic" tabindex="-1"><a class="header-anchor" href="#indexed-å’Œ-magic" aria-hidden="true">#</a> <code>indexed</code> å’Œ <code>magic</code></h3><p>æ–¹æ³•å‚æ•°ä¸­ <code>indexed</code> å…¶å®è¡¨ç¤ºçš„æ˜¯ <code>isa_t</code> çš„ç±»å‹ï¼Œè¡¨ç¤ºæ˜¯å¦æ˜¯æŒ‡é’ˆå‹ <code>isa</code> ã€‚å½“ <code>indexed</code> ä¸º <code>false</code> æ—¶è¡¨ç¤ºä¸ºæŒ‡é’ˆå‹ <code>isa</code> é‚£ä¹ˆæ­¤æ—¶è®¿é—®å®ƒçš„æ—¶è¿”å›çš„æ˜¯ <code>cls</code> çš„åœ°å€ï¼Œå³ç±»çš„åœ°å€ã€‚</p><p>å½“ <code>indexed</code> ä¸º <code>true</code> åˆ™æ˜¯è¡¨ç¤ºä¸æ˜¯æŒ‡é’ˆï¼Œä¸è¿‡åŒ…å«äº†ä¸€äº› <code>cls</code> çš„ä¿¡æ¯ã€‚å…·ä½“åˆå§‹åŒ–æˆ‘ä»¬çœ‹åˆ°ä¸ºï¼š</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code>isa<span class="token punctuation">.</span>bits <span class="token operator">=</span> ISA_MAGIC_VALUE<span class="token punctuation">;</span>  <span class="token comment">// ISA_MAGIC_VALUE = 0x001d800000000001ULL</span>
<span class="token comment">// isa.magic is part of ISA_MAGIC_VALUE</span>
<span class="token comment">// isa.indexed is part of ISA_MAGIC_VALUE</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶è½¬åŒ–æˆäºŒè¿›åˆ¶åè¡¨ç¤ºä¸ºï¼š</p><figure><img src="https://image-1257141638.cos.ap-guangzhou.myqcloud.com/post/isa_t_set.png" alt="relation of class" tabindex="0" loading="lazy"><figcaption>relation of class</figcaption></figure><p>çœ‹åˆ° <code>magic</code> è¢«è®¾ç½®ä¸º <code>111011</code> ï¼Œ<code>indexed</code> è¢«è®¾ç½®ä¸º <code>1</code> ã€‚</p><h3 id="has-cxx-dtor" tabindex="-1"><a class="header-anchor" href="#has-cxx-dtor" aria-hidden="true">#</a> <code>has_cxx_dtor</code></h3><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code>isa<span class="token punctuation">.</span>has_cxx_dtor <span class="token operator">=</span> hasCxxDtor<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™é‡Œè®¾ç½®äº†è¡¨ç¤ºè¯¥å¯¹è±¡æ˜¯å¦æœ‰ C++ æˆ–è€… Objc çš„ææ„å™¨ï¼Œå¦‚æœæ²¡æœ‰ææ„å™¨å°±ä¼šå¿«é€Ÿé‡Šæ”¾å†…å­˜ã€‚</p><h3 id="shiftcls" tabindex="-1"><a class="header-anchor" href="#shiftcls" aria-hidden="true">#</a> <code>shiftcls</code></h3><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code>isa<span class="token punctuation">.</span>shiftcls <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">uintptr_t</span><span class="token punctuation">)</span>cls <span class="token operator">&gt;&gt;</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>shiftcls</code> å­˜å‚¨äº†ç±»çš„åœ°å€ï¼Œè¿™é‡Œçœ‹åˆ°å°†å½“å‰çš„ <code>cls</code> åœ°å€å‘å³ç§»äº†3ä¸ªå­—èŠ‚ï¼Œæ˜¯å› ä¸ºç›®å‰ç±»æŒ‡é’ˆæ˜¯æŒ‰ç…§8å­—èŠ‚å¯¹é½ï¼Œæ‰€ä»¥è®©æŒ‡é’ˆå3ä½ä¸º0æ¥ä¿è¯åœ°å€æ˜¯8çš„å€æ•°ï¼Œè¿™æ ·å°±å¯ä»¥æé«˜ä»£ç è¿è¡Œæ•ˆç‡ï¼Œå…·ä½“è¯´æ¥å°±æ˜¯å­—èŠ‚å¯¹é½çš„æ„ä¹‰äº†ã€‚è¿™é‡Œå°±æŠŠä¸ºäº†å­—èŠ‚å¯¹é½çš„3ä½èˆå¼ƒæ¥èŠ‚çº¦å†…å­˜æ¶ˆè€—ã€‚</p><h3 id="è·å–åŸå§‹-isa-åœ°å€" tabindex="-1"><a class="header-anchor" href="#è·å–åŸå§‹-isa-åœ°å€" aria-hidden="true">#</a> è·å–åŸå§‹ <code>isa</code> åœ°å€</h3><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="language-c++"><code>#   define ISA_MASK        0x00007ffffffffff8ULL
inline Class 
objc_object::ISA() 
{
    assert(!isTaggedPointer()); 
    return (Class)(isa.bits &amp; ISA_MASK);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°ç”¨ç»“æ„ä½“ä»£æ›¿äº†åŸæ¥çš„ <code>isa</code> æŒ‡é’ˆæŒ‡å‘çš„ç±»åœ°å€ï¼Œè¿™é‡Œå°±æä¾›ä¸€ä¸ªæ–¹æ³•æ¥è·å– <code>cls</code> åœ°å€ã€‚</p><h2 id="cache" tabindex="-1"><a class="header-anchor" href="#cache" aria-hidden="true">#</a> cache</h2><p><code>cache</code> ä¸»è¦ç”¨äºæ–¹æ³•æ€§èƒ½ä¼˜åŒ–ï¼Œéƒ½çŸ¥é“OCé‡Œé¢å‘æ¶ˆæ¯éƒ½éœ€è¦å»æ–¹æ³•è¡¨é‡Œé¢å»æŸ¥è¯¢ï¼Œå½“æ–¹æ³•å¾ˆå¤šï¼Œåˆå­˜åœ¨ç»§æ‰¿å…³ç³»çš„æ—¶å€™ï¼Œæ–¹æ³•çš„æŸ¥è¯¢æ˜¯å¾ˆè´¹æ—¶çš„ï¼Œæ‰€ä»¥è¿™é‡Œåšäº†ä¸€ä¸ªå¯¹æ–¹æ³•è¿›è¡Œç¼“å­˜ã€‚ä¸‹é¢çœ‹ä¸€ä¸‹ <code>cache_t</code> çš„å®šä¹‰ï¼š</p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="language-c++"><code>typedef uint32_t mask_t;

struct cache_t {
    struct bucket_t *_buckets;
    mask_t _mask;
    mask_t _occupied;
}

typedef uintptr_t cache_key_t;

struct bucket_t {
private:
    cache_key_t _key;
    IMP _imp;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ˜¯æ€ä¹ˆç¼“å­˜çš„ï¼Œä¸‹é¢æ˜¯è°ƒç”¨æ ˆï¼š</p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="language-c++"><code>void cache_t::setBucketsAndMask(struct bucket_t *newBuckets, mask_t newMask)
    void cache_t::reallocate(mask_t oldCapacity, mask_t newCapacity)
        static void cache_fill_nolock(Class cls, SEL sel, IMP imp, id receiver)
            void cache_fill(Class cls, SEL sel, IMP imp, id receiver)
                IMP lookUpImpOrForward(Class cls, SEL sel, id inst, 
                                       bool initialize, bool cache, bool resolver)
                    IMP lookUpImpOrNil(Class cls, SEL sel, id inst, 
                                       bool initialize, bool cache, bool resolver)
                        Method class_getInstanceMethod(Class cls, SEL sel)
        
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°å½“æˆ‘ä»¬è°ƒç”¨ <code>Method class_getInstanceMethod(Class cls, SEL sel)</code> å¦‚æœæ­¤æ—¶ç¼“å­˜ä¸ºç©ºï¼Œåˆ™å°† <code>IMP</code> æ ¹æ® <code>SEL</code> ç¼“å­˜èµ·æ¥ã€‚</p><p>æ–¹æ³•æŸ¥è¯¢çš„è¿‡ç¨‹çš„ä»£ç ç‰‡æ®µï¼š</p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="language-c++"><code>curClass = cls;
while ((curClass = curClass-&gt;superclass)) {
    // Superclass cache.
    imp = cache_getImp(curClass, sel);
    if (imp) {
        if (imp != (IMP)_objc_msgForward_impcache) {
            // Found the method in a superclass. Cache it in this class.
            log_and_fill_cache(cls, imp, sel, inst, curClass);
            goto done;
        }
        else {
            // Found a forward:: entry in a superclass.
            // Stop searching, but don&#39;t cache yet; call method 
            // resolver for this class first.
            break;
        }
    }

    // Superclass method list.
    meth = getMethodNoSuper_nolock(curClass, sel);
    if (meth) {
        log_and_fill_cache(cls, meth-&gt;imp, sel, inst, curClass);
        // log_and_fill_cache é™¤äº†å†™log å…¶å®å°±è°ƒç”¨äº† cache_fill (cls, sel, imp, receiver);
        imp = meth-&gt;imp;
        goto done;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ä»å½“å‰ç±»å¼€å§‹æŸ¥è¯¢ï¼Œä¸€ç›´æ²¿ç€ <code>superclass</code> æŸ¥è¯¢ã€‚æ‰¾åˆ°åè¿›è¡Œç¼“å­˜ï¼š</p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="language-c++"><code>static void cache_fill_nolock(Class cls, SEL sel, IMP imp, id receiver)
{
    cacheUpdateLock.assertLocked();

    // Never cache before +initialize is done
    if (!cls-&gt;isInitialized()) return;

    // Make sure the entry wasn&#39;t added to the cache by some other thread 
    // before we grabbed the cacheUpdateLock.
    if (cache_getImp(cls, sel)) return;

    cache_t *cache = getCache(cls);
    cache_key_t key = getKey(sel);

    // Use the cache as-is if it is less than 3/4 full
    mask_t newOccupied = cache-&gt;occupied() + 1;
    mask_t capacity = cache-&gt;capacity();
    if (cache-&gt;isConstantEmptyCache()) {
        // Cache is read-only. Replace it.
        cache-&gt;reallocate(capacity, capacity ?: INIT_CACHE_SIZE);
    }
    else if (newOccupied &lt;= capacity / 4 * 3) {
        // Cache is less than 3/4 full. Use it as-is.
    }
    else {
        // Cache is too full. Expand it.
        cache-&gt;expand();
    }

    // Scan for the first unused slot and insert there.
    // There is guaranteed to be an empty slot because the 
    // minimum size is 4 and we resized at 3/4 full.
    bucket_t *bucket = cache-&gt;find(key, receiver);
    if (bucket-&gt;key() == 0) cache-&gt;incrementOccupied();
    bucket-&gt;set(key, imp);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ <code>sel</code> æ‰¾åˆ°å¯¹åº”çš„ <code>key</code> ç„¶åé€šè¿‡ <code>key</code> æ‰¾åˆ°å¯¹åº”çš„ <code>bucket</code> ç„¶åä¿å­˜ <code>key</code> ã€<code>imp</code> ã€‚</p><h2 id="bits" tabindex="-1"><a class="header-anchor" href="#bits" aria-hidden="true">#</a> bits</h2><p>è¿™ä¸ªå­—æ®µä¸»è¦æ˜¯æ¥è·å–ä¸€ä¸ªç±»å‹ä¸º <code>class_rw_t </code> å€¼çš„æŒ‡é’ˆã€‚å¯ä»¥å¾ˆç›´è§‚çš„çœ‹å‡ºï¼Œè¿™é‡Œä¿å­˜äº†ç±»çš„æ–¹æ³•ã€å±æ€§ï¼Œä»¥åŠéµå¾ªçš„åè®®ã€‚</p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="language-c++"><code>struct class_rw_t {
    uint32_t flags;
    uint32_t version;

    const class_ro_t *ro;

    method_array_t methods;
    property_array_t properties;
    protocol_array_t protocols;

    Class firstSubclass;
    Class nextSiblingClass;

    char *demangledName;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­æœ‰ä¸ªå¸¸é‡æŒ‡é’ˆ <code>ro</code> ï¼Œé‡Œé¢ä¿å­˜äº†åœ¨ç¼–è¯‘æœŸå°±ç¡®å®šçš„å±æ€§ã€æ–¹æ³•å’Œåè®®ã€‚</p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="language-c++"><code>struct class_ro_t {
    uint32_t flags;
    uint32_t instanceStart;
    uint32_t instanceSize;
#ifdef __LP64__
    uint32_t reserved;
#endif

    const uint8_t * ivarLayout;
    
    const char * name;
    method_list_t * baseMethodList;
    protocol_list_t * baseProtocols;
    const ivar_list_t * ivars;

    const uint8_t * weakIvarLayout;
    property_list_t *baseProperties;

    method_list_t *baseMethods() const {
        return baseMethodList;
    }
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ Runtime ä¸‹æ‰§è¡Œä¸‹é¢çš„æ–¹æ³•ï¼š</p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="language-c++"><code>/***********************************************************************
* realizeClass
* Performs first-time initialization on class cls, 
* including allocating its read-write data.
* Returns the real class structure for the class. 
* Locking: runtimeLock must be write-locked by the caller
**********************************************************************/
static Class realizeClass(Class cls) {
    // è¿™é‡Œåªåˆ—å‡ºå…³é”®ä»£ç 
    const class_ro_t *ro = (const class_ro_t *)cls-&gt;data();
    class_rw_t *rw = (class_rw_t *)calloc(sizeof(class_rw_t), 1);
    rw-&gt;ro = ro;
    rw-&gt;flags = RW_REALIZED|RW_REALIZING;
    cls-&gt;setData(rw);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå…ˆè°ƒç”¨ <code>data()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªç±»å‹ä¸º <code>class_rw_t</code> å¼ºè½¬ä¸º <code>class_ro_t</code> çš„æŒ‡é’ˆï¼Œç„¶ååˆå§‹åŒ–ä¸€ä¸ª <code>class_rw_t</code> ç„¶åå°†è®¾ç½® <code>ro</code> ï¼Œä»¥åŠç›¸å…³ <code>flag</code> ï¼Œæœ€åè°ƒç”¨ <code>setData</code> æ›¿æ¢åŸæ¥çš„ã€‚</p><p>åœ¨ <code>static Class realizeClass(Class cls)</code> æ–¹æ³•ä¸‹é¢è¿˜æœ‰å¯¹ç±»çš„æ–¹æ³•çš„ä¸€äº›å¤„ç†ï¼š</p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="language-c++"><code>// Attach categories
methodizeClass(cls);



/****** implementation of methodizeClass ******/

// Install methods and properties that the class implements itself.
method_list_t *list = ro-&gt;baseMethods();
if (list) {
    prepareMethodLists(cls, &amp;list, 1, YES, isBundleClass(cls));
    rw-&gt;methods.attachLists(&amp;list, 1);
}

property_list_t *proplist = ro-&gt;baseProperties;
if (proplist) {
    rw-&gt;properties.attachLists(&amp;proplist, 1);
}

protocol_list_t *protolist = ro-&gt;baseProtocols;
if (protolist) {
    rw-&gt;protocols.attachLists(&amp;protolist, 1);
}

// Attach categories.
category_list *cats = unattachedCategoriesForClass(cls, true /*realizing*/);
attachCategories(cls, cats, false /*don&#39;t flush caches*/);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†ç±»åŸå§‹çš„æ–¹æ³•ã€å±æ€§ã€åè®®æ·»åŠ åˆ° <code>class_rw_t</code> ä¸­ï¼Œç„¶åå°†åˆ†ç±»ä¸­çš„æ–¹æ³•ä¹Ÿæ·»åŠ åˆ° <code>class_rw_t</code> æ–¹æ³•åˆ—è¡¨ä¸­ã€‚è€Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>class_ro_t</code> ä¸­ <code> const ivar_list_t * ivars;</code> å®ä¾‹å˜é‡å·²ç»åœ¨ç¼–è¯‘æœŸç¡®å®šå†…å­˜åœ°å€ä½œä¸ºé™æ€å˜é‡ä¿å­˜èµ·æ¥äº†ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸èƒ½å‘ç¼–è¯‘åçš„ç±»æ·»åŠ å®ä¾‹å˜é‡çš„åŸå› ã€‚</p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: yinheng@kuaishou.com">Yin Heng</span><!--]--><!--]--></div></div></footer><!----><div id="comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">æ˜µç§°</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">é‚®ç®±</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">ç½‘å€</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="è¯·ç•™è¨€ã€‚(å¡«å†™é‚®ç®±å¯åœ¨è¢«å›å¤æ—¶æ”¶åˆ°é‚®ä»¶æé†’)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>é¢„è§ˆ:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="è¡¨æƒ…" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="è¡¨æƒ…åŒ…"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="ä¸Šä¼ å›¾ç‰‡"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="é¢„è§ˆ"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if--> Â å­—</div><button type="button" class="wl-btn">ç™»å½•</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->æäº¤<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="æœç´¢è¡¨æƒ…åŒ…"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> è¯„è®º</div><ul class="wl-sort"><!--[--><li class="active">æŒ‰æ­£åº</li><li class="">æŒ‰å€’åº</li><li class="">æŒ‰çƒ­åº¦</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.15.5</div></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">æˆ‘æœ‰æœ€ç¾å¥½çš„åˆè¡·</div><div class="vp-copyright">Copyright Â© 2023 Maple Yin</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-559df010.js" defer></script>
  </body>
</html>
